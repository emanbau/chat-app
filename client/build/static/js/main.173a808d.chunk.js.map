{"version":3,"sources":["pages/Messenger.tsx","Redux/reduxhooks.ts","Redux/loggedin.ts","GraphQL/Queries/User.ts","Redux/account.ts","GraphQL/Mutations/User.ts","pages/Signup.tsx","pages/Login.tsx","App.tsx","Redux/store.ts","index.tsx"],"names":["socket","useAppDispatch","useDispatch","useAppSelector","useSelector","loggedinSlice","createSlice","name","initialState","loggedin","reducers","login","state","logout","actions","LOG_IN","gql","accountSlice","account","username","password","setUsername","action","payload","setPassword","SIGN_UP","Signup","useState","firstName","setFirstName","lastName","setLastName","useMutation","createUser","error","loading","data","signUp","a","variables","console","useEffect","log","type","placeholder","onChange","e","target","value","onClick","Login","loginHandle","signupNeeded","setSignupNeeded","useLazyQuery","getUser","dispatch","reduxSetUsername","reduxSetPassword","className","Messenger","socketConnected","setSocketConnected","inARoom","setInARoom","room","setRoom","accountUsername","messageList","setMessageList","message","setMessage","io","on","sendMessage","messageContent","content","author","emit","map","errorLink","onError","graphQLErrors","networkError","link","from","HttpLink","uri","client","ApolloClient","cache","InMemoryCache","App","ApolloProvider","store","configureStore","reducer","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.173a808d.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAppSelector } from '../Redux/reduxhooks';\nimport { io } from 'socket.io-client';\n\ninterface Props {\n    \n}\n\n// Interface for socket message content\ninterface Content {\n    author: string;\n    message: string;\n}\n\ninterface MessageContent {\n    room: string;\n    content: Content;\n}\n\n// Socket IO Setup\nlet socket: any;\nconst CONNECTION_PORT: string = 'localhost:3001/';\n\nconst Messenger: React.FC<Props> = () => {\n\n    // Connected to Socket State\n    const [socketConnected, setSocketConnected] = useState<boolean>(false);\n\n    // Room States\n    const [inARoom, setInARoom] = useState<boolean>(false);\n    const [room, setRoom] = useState<string>('');\n\n    // Redux User Account Data\n    const accountUsername = useAppSelector(state => state.account.account.username);\n\n    // Message States\n    const [messageList, setMessageList] = useState<Array<Content>>([]);\n    const [message, setMessage] = useState<string>('');\n\n    useEffect(() => {\n        // Setup connection to server on first render\n        socket = io(CONNECTION_PORT);\n        setSocketConnected(true);\n    }, [socketConnected])\n\n    // Connect to room handle\n    const connectToRoom: () => void = () => {\n        setInARoom(true);\n        socket.emit('join_room', room);\n    }\n\n    // Disconnect from room handle\n    const disconnectFromRoom: () => void = () => {\n        setInARoom(false);\n        socket.disconnect();\n        setSocketConnected(false);\n    }\n\n    // Receive Messages\n    useEffect(() => {\n        socket.on('receive_message', (data: Content) => {\n            setMessageList([...messageList, data]);\n        })\n    })\n\n    // Send Message\n    const sendMessage = async (): Promise<void> => {\n        // Message Content\n        let messageContent: MessageContent = {\n            room: room,\n            content: {\n                author: accountUsername,\n                message: message,\n            }\n        };\n\n        setMessageList([...messageList, messageContent.content]);\n        setMessage('');\n        await socket.emit(\"send_message\", messageContent);\n    }\n\n    return (\n        <div>\n            {!inARoom ? (\n                <div className=\"room-selector\">\n                    <input type=\"text\" onChange={(e) => setRoom(e.target.value)} placeholder=\"Enter Room Name\" />\n                    <button onClick={connectToRoom}>Join Room</button>\n                </div>\n            ) : (\n                <div className=\"messenger-page-container\">\n                    <div className=\"chat-container\">\n                        {messageList.map((message: Content) => {\n                            return(                               \n                                <div className=\"messageList-container\">\n                                    <p>{message.author}</p>\n                                    <div className=\"message\">\n                                        <p>{message.message}</p>\n                                    </div>\n                                </div>\n                            )\n                        })}\n                    </div>\n                    <div className=\"message-input-container\">\n                        <input type=\"text\" placeholder=\"Message\" value={message} onChange={(e) => setMessage(e.target.value)} />\n                        <button onClick={sendMessage}>Send</button>\n                    </div>\n                </div>\n            )\n\n            }\n        </div>\n    )\n}\n\nexport default Messenger\n","import { TypedUseSelectorHook, useSelector, useDispatch } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;","import { createSlice } from '@reduxjs/toolkit';\n\ninterface LoggedinState {\n    loggedin: boolean;\n}\n\nconst initialState: LoggedinState = {\n    loggedin: false\n}\n\nexport const loggedinSlice = createSlice({\n    name: 'loggedin',\n    initialState,\n    reducers: {\n        login: state => {\n            state.loggedin = true;\n        },\n        logout: state => {\n            state.loggedin = false;\n        }\n    }\n}) \n\nexport const { login, logout } = loggedinSlice.actions;\nexport default loggedinSlice.reducer;\n","import { gql } from '@apollo/client';\n\nexport const LOG_IN = gql`\n    query getUser(\n        $username: String!\n        $password: String!\n    ) {\n        getUser(\n            username: $username\n            password: $password\n        ) {\n            username\n            password\n        }\n    }\n`","import { createSlice } from '@reduxjs/toolkit';\n\ninterface Account {\n    username: string;\n    password: string;\n}\n\ninterface AccountState {\n    account: Account\n}\n\nconst initialState: AccountState = {\n    account: {\n        username: '',\n        password: '',\n    }\n}\n\nexport const accountSlice = createSlice({\n    name: 'account',\n    initialState,\n    reducers: {\n        setUsername: (state, action) => {\n            state.account.username = action.payload;\n        },\n        setPassword: (state, action) => {\n            state.account.password = action.payload;\n        },\n        logout: state => {\n            state.account.password = '';\n            state.account.password = '';\n        }\n    }\n}) \n\nexport const { setUsername, setPassword, logout } = accountSlice.actions;\nexport default accountSlice.reducer;","import { gql } from '@apollo/client';\n\nexport const SIGN_UP = gql`\n    mutation createUser(\n        $firstName: String!\n        $lastName: String!\n        $username: String!\n        $password: String!\n    ) {\n        createUser(\n            firstName: $firstName\n            lastName: $lastName\n            username: $username\n            password: $password\n        ) {\n            successful\n            message\n        }\n    }\n`","import React, { useState, useEffect } from 'react';\nimport { useMutation } from '@apollo/client';\nimport { SIGN_UP } from '../GraphQL/Mutations/User';\n\ninterface Props {\n    \n}\n\n\nconst Signup: React.FC<Props> = ({}) => {\n    // Signup Field States\n    const [firstName, setFirstName] = useState<string>('');\n    const [lastName, setLastName] = useState<string>('');\n    const [username, setUsername] = useState<string>('');\n    const [password, setPassword] = useState<string>('');\n\n    // GraphQL Mutation\n    const [createUser, { error, loading, data }] = useMutation(SIGN_UP);\n    \n    // Sign Up Button Handler\n    const signUp = async (): Promise<void>  => {\n        try {\n            await createUser({\n                variables: {\n                    firstName: firstName,\n                    lastName: lastName,\n                    username: username,\n                    password: password\n                }\n            });\n        } catch (e) {\n            console.error(e);\n        }\n    };\n\n    useEffect(() => {\n        if (error) console.error(error);\n        if (!loading) console.log(data);\n    }, [error, loading, data]);\n\n    return (\n        <div>\n            <input \n                type=\"text\"\n                placeholder=\"First Name\"\n                onChange={(e) => setFirstName(e.target.value)}\n            />\n            <input \n                type=\"text\"\n                placeholder=\"Last Name\"\n                onChange={(e) => setLastName(e.target.value)}\n            />\n            <input \n                type=\"text\"\n                placeholder=\"Username\"\n                onChange={(e) => setUsername(e.target.value)}\n            />\n            <input \n                type=\"text\"\n                placeholder=\"Password\"\n                onChange={(e) => setPassword(e.target.value)}\n            />\n            <button onClick={signUp}>Launch</button>\n        </div>\n    )\n}\n\nexport default Signup;","import React, { useState, useEffect } from 'react';\nimport { useLazyQuery } from '@apollo/client';\nimport { LOG_IN } from '../GraphQL/Queries/User';\nimport { setUsername as reduxSetUsername, setPassword as reduxSetPassword } from '../Redux/account';\nimport { useAppDispatch } from '../Redux/reduxhooks';\nimport './Login.scss'\nimport Signup from './Signup';\n\ninterface Props {\n    loginHandle: () => void\n}\n\nconst Login: React.FC<Props> = ({ loginHandle }) => {\n\n    // Needs to Signup State\n    const [signupNeeded, setSignupNeeded] = useState<boolean>(false);\n    // Signup State Handlers\n    const needSignupHandle: () => void = () => {\n        setSignupNeeded(true);\n    } \n    const noSignupHandle: () => void = () => {\n        setSignupNeeded(false);\n    }\n\n    // Login Field States\n    const [ username, setUsername ] = useState<string>('');\n    const [ password, setPassword ] = useState<string>('');\n\n    // GraphQL Login QueryS\n    const [ getUser, { error, loading, data }] = useLazyQuery(\n        LOG_IN, \n        {variables: {\n            username: username,\n            password: password,\n        }}\n    )\n\n    // Redux States & Reducers\n    const dispatch = useAppDispatch();\n    \n    // Load Login Query\n    useEffect(() => {\n        if (error) console.error(error);\n        if (!loading) console.log(data);\n    }, [error, loading, data])\n\n    // Change Redux State on Successful Login Query\n    useEffect(() => {\n        if (data) {\n            dispatch(reduxSetUsername(username));\n            dispatch(reduxSetPassword(password));\n            loginHandle();\n        }\n    }, [data, username, password, dispatch, loginHandle])\n\n    return (\n        <div>\n            { signupNeeded ? (\n                <Signup />\n            ) : (\n                <div className=\"login-container\" >\n                    <h1 className=\"login-heading\">Login</h1>\n                    <p className=\"login-caption\">Start chatting today!</p>\n                    <input \n                        type=\"text\"\n                        placeholder=\"Username\"\n                        onChange={(e) => setUsername(e.target.value)}\n                        className=\"username-input\"\n                    />\n                    <input \n                        type=\"text\"\n                        placeholder=\"Password\"\n                        onChange={(e) => setPassword(e.target.value)}\n                        className=\"password-input\"\n                    />\n                    <button className=\"login-button\" onClick={() => getUser()}>Log In</button>\n                    <p className=\"login-register\">Not registered yet? <span onClick={needSignupHandle}>Create an Account</span></p>\n                </div>\n            )}\n        </div>\n    )\n}\n\nexport default Login;\n","import React from 'react';\nimport './App.scss';\nimport { ApolloClient, InMemoryCache, ApolloProvider, HttpLink, from } from '@apollo/client'\nimport { onError } from '@apollo/client/link/error';\nimport { useAppSelector, useAppDispatch } from './Redux/reduxhooks';\nimport { login } from './Redux/loggedin';\nimport Login from './pages/Login';\nimport Messenger from './pages/Messenger';\n\n// Apollo Client Setup\nconst errorLink = onError(({ graphQLErrors, networkError }) => {\n  if (graphQLErrors) {\n    graphQLErrors.map(({ message }: any) => {\n      console.log(`GraphQL error ${message}`);\n      return null;\n    });\n  }\n  if (networkError) {\n    console.log(networkError);\n  }\n});\n\nconst link = from([\n  errorLink, \n  new HttpLink({ uri: \"http://localhost:3001/graphql\"})\n]);\n\nconst client = new ApolloClient({\n  cache: new InMemoryCache(),\n  link: link,\n})\n\n\nconst App: React.FC = () => {\n  // Redux States & Reducers\n  const loggedin = useAppSelector(state => state.loggedin.loggedin);\n  const dispatch = useAppDispatch();\n\n  // Logged in handler\n  const loginHandle: () => void = () => {\n    dispatch(login());\n  }\n\n  return (\n    \n    <ApolloProvider client={client}>\n      <div className=\"App\">\n        {!loggedin ? (\n            <Login loginHandle={loginHandle} />\n          ) : (\n            <Messenger />\n          )\n        }\n      </div>\n    </ApolloProvider>\n  );\n}\n\nexport default App;\n","import { configureStore } from '@reduxjs/toolkit';\nimport loggedin from './loggedin';\nimport account from './account';\n\nexport const store = configureStore({\n    reducer: {\n        loggedin: loggedin,\n        account: account,\n    }\n})\n\n// export type of state from the store\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { store } from './Redux/store';\nimport { Provider } from 'react-redux';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}