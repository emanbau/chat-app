(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{103:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var c,a,r=n(2),o=n(37),s=n.n(o),i=(n(103),n(39)),u=n(157),l=n(53),j=n(145),d=n(143),b=n(88),g=n(34),O=function(){return Object(g.b)()},p=g.c,m=n(26),f=Object(m.b)({name:"loggedin",initialState:{loggedin:!1},reducers:{login:function(e){e.loggedin=!0},logout:function(e){e.loggedin=!1}}}),h=f.actions,x=h.login,v=(h.logout,f.reducer),w=n(19),S=n(158),y=n(84),k=n(25),E=Object(k.a)(c||(c=Object(y.a)(["\n    query getUser(\n        $username: String!\n        $password: String!\n    ) {\n        getUser(\n            username: $username\n            password: $password\n        ) {\n            username\n            password\n        }\n    }\n"]))),N=Object(m.b)({name:"account",initialState:{account:{username:"",password:""}},reducers:{setUsername:function(e,t){e.account.username=t.payload},setPassword:function(e,t){e.account.password=t.payload},logout:function(e){e.account.password="",e.account.password=""}}}),C=N.actions,U=C.setUsername,L=C.setPassword,$=(C.logout,N.reducer),J=n(4),P=function(e){var t=e.loginHandle,n=Object(r.useState)(""),c=Object(w.a)(n,2),a=c[0],o=c[1],s=Object(r.useState)(""),i=Object(w.a)(s,2),u=i[0],l=i[1],j=Object(S.a)(E,{variables:{username:a,password:u}}),d=Object(w.a)(j,2),b=d[0],g=d[1],p=g.error,m=g.loading,f=g.data,h=O();return Object(r.useEffect)((function(){p&&console.error(p),m||console.log(f)}),[p,m,f]),Object(r.useEffect)((function(){f&&(h(U(a)),h(L(u)),t())}),[f,a,u,h,t]),Object(J.jsxs)("div",{children:[Object(J.jsx)("input",{type:"text",placeholder:"Username",onChange:function(e){return o(e.target.value)}}),Object(J.jsx)("input",{type:"text",placeholder:"Password",onChange:function(e){return l(e.target.value)}}),Object(J.jsx)("button",{onClick:function(){return b()},children:"Log In"})]})},_=n(57),q=n.n(_),H=n(86),I=n(59),Q=n(87),R=function(){var e=Object(r.useState)(!1),t=Object(w.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),s=Object(w.a)(o,2),i=s[0],u=s[1],l=p((function(e){return e.account.account.username})),j=Object(r.useState)([]),d=Object(w.a)(j,2),b=d[0],g=d[1],O=Object(r.useState)(""),m=Object(w.a)(O,2),f=m[0],h=m[1];Object(r.useEffect)((function(){a=Object(Q.io)("localhost:3001/")}),[]);Object(r.useEffect)((function(){a.on("receive_message",(function(e){g([].concat(Object(I.a)(b),[e]))}))}));var x=function(){var e=Object(H.a)(q.a.mark((function e(){var t;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={room:i,content:{author:l,message:f}},g([].concat(Object(I.a)(b),[t.content])),h(""),e.next=5,a.emit("send_message",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(J.jsx)("div",{children:n?Object(J.jsxs)("div",{className:"messenger-page-container",children:[Object(J.jsx)("div",{className:"chat-container",children:b.map((function(e){return Object(J.jsxs)("div",{className:"messageList-container",children:[Object(J.jsx)("p",{children:e.author}),Object(J.jsx)("div",{className:"message",children:Object(J.jsx)("p",{children:e.message})})]})}))}),Object(J.jsxs)("div",{className:"message-input-container",children:[Object(J.jsx)("input",{type:"text",placeholder:"Message",value:f,onChange:function(e){return h(e.target.value)}}),Object(J.jsx)("button",{onClick:x,children:"Send"})]})]}):Object(J.jsxs)("div",{className:"room-selector",children:[Object(J.jsx)("input",{type:"text",onChange:function(e){return u(e.target.value)},placeholder:"Enter Room Name"}),Object(J.jsx)("button",{onClick:function(){c(!0),a.emit("join_room",i)},children:"Join Room"})]})})},A=Object(b.a)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.map((function(e){var t=e.message;return console.log("GraphQL error ".concat(t)),null})),n&&console.log(n)})),B=Object(i.from)([A,new u.a({uri:"http://localhost:3001/graphql"})]),G=new l.a({cache:new j.a,link:B}),M=function(){var e=p((function(e){return e.loggedin.loggedin})),t=O();return Object(J.jsx)(d.a,{client:G,children:Object(J.jsx)("div",{className:"App",children:e?Object(J.jsx)(R,{}):Object(J.jsx)(P,{loginHandle:function(){t(x())}})})})},z=Object(m.a)({reducer:{loggedin:v,account:$}});s.a.render(Object(J.jsx)(g.a,{store:z,children:Object(J.jsx)(M,{})}),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.f5e288f1.chunk.js.map