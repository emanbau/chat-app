(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{106:function(e,t,n){},111:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);var a,c,r,s=n(1),o=n(40),i=n.n(o),u=(n(106),n(26)),l=n(160),j=n(57),b=n(149),d=n(147),O=n(93),p=n(36),g=function(){return Object(p.b)()},m=p.c,h=n(27),f=Object(h.b)({name:"loggedin",initialState:{loggedin:!1},reducers:{login:function(e){e.loggedin=!0},logout:function(e){e.loggedin=!1}}}),x=f.actions,v=x.login,w=(x.logout,f.reducer),N=n(10),S=n(161),y=n(44),C=n(25),k=Object(C.a)(a||(a=Object(y.a)(["\n    query getUser(\n        $username: String!\n        $password: String!\n    ) {\n        getUser(\n            username: $username\n            password: $password\n        ) {\n            username\n            password\n        }\n    }\n"]))),$=Object(h.b)({name:"account",initialState:{account:{username:"",password:""}},reducers:{setUsername:function(e,t){e.account.username=t.payload},setPassword:function(e,t){e.account.password=t.payload},logout:function(e){e.account.password="",e.account.password=""}}}),E=$.actions,U=E.setUsername,L=E.setPassword,P=(E.logout,$.reducer),J=(n(111),n(28)),_=n.n(J),q=n(47),A=n(88),H=n(163),I=Object(C.a)(c||(c=Object(y.a)(["\n    mutation createUser(\n        $firstName: String!\n        $lastName: String!\n        $username: String!\n        $password: String!\n    ) {\n        createUser(\n            firstName: $firstName\n            lastName: $lastName\n            username: $username\n            password: $password\n        ) {\n            successful\n            message\n        }\n    }\n"]))),Q=n(3),R=function(e){Object(A.a)(e);var t=Object(s.useState)(""),n=Object(N.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)(""),o=Object(N.a)(r,2),i=o[0],u=o[1],l=Object(s.useState)(""),j=Object(N.a)(l,2),b=j[0],d=j[1],O=Object(s.useState)(""),p=Object(N.a)(O,2),g=p[0],m=p[1],h=Object(H.a)(I),f=Object(N.a)(h,2),x=f[0],v=f[1],w=v.error,S=v.loading,y=v.data,C=function(){var e=Object(q.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x({variables:{firstName:a,lastName:i,username:b,password:g}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){w&&console.error(w),S||console.log(y)}),[w,S,y]),Object(Q.jsxs)("div",{children:[Object(Q.jsx)("input",{type:"text",placeholder:"First Name",onChange:function(e){return c(e.target.value)}}),Object(Q.jsx)("input",{type:"text",placeholder:"Last Name",onChange:function(e){return u(e.target.value)}}),Object(Q.jsx)("input",{type:"text",placeholder:"Username",onChange:function(e){return d(e.target.value)}}),Object(Q.jsx)("input",{type:"text",placeholder:"Password",onChange:function(e){return m(e.target.value)}}),Object(Q.jsx)("button",{onClick:C,children:"Launch"})]})},B=function(e){var t=e.loginHandle,n=Object(s.useState)(!1),a=Object(N.a)(n,2),c=a[0],r=a[1],o=Object(s.useState)(""),i=Object(N.a)(o,2),u=i[0],l=i[1],j=Object(s.useState)(""),b=Object(N.a)(j,2),d=b[0],O=b[1],p=Object(S.a)(k,{variables:{username:u,password:d}}),m=Object(N.a)(p,2),h=m[0],f=m[1],x=f.error,v=f.loading,w=f.data,y=g();return Object(s.useEffect)((function(){x&&console.error(x),v||console.log(w)}),[x,v,w]),Object(s.useEffect)((function(){w&&(y(U(u)),y(L(d)),t())}),[w,u,d,y,t]),Object(Q.jsx)("div",{children:c?Object(Q.jsx)(R,{}):Object(Q.jsxs)("div",{className:"login-container",children:[Object(Q.jsx)("h1",{className:"login-heading",children:"Login"}),Object(Q.jsx)("p",{className:"login-caption",children:"Start chatting today!"}),Object(Q.jsx)("input",{type:"text",placeholder:"Username",onChange:function(e){return l(e.target.value)},className:"username-input"}),Object(Q.jsx)("input",{type:"text",placeholder:"Password",onChange:function(e){return O(e.target.value)},className:"password-input"}),Object(Q.jsx)("button",{className:"login-button",onClick:function(){return h()},children:"Log In"}),Object(Q.jsxs)("p",{className:"login-register",children:["Not registered yet? ",Object(Q.jsx)("span",{onClick:function(){r(!0)},children:"Create an Account"})]})]})})},F=n(62),G=n(92),M=function(){var e=Object(s.useState)(!1),t=Object(N.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(!1),o=Object(N.a)(c,2),i=o[0],u=o[1],l=Object(s.useState)(""),j=Object(N.a)(l,2),b=j[0],d=j[1],O=m((function(e){return e.account.account.username})),p=Object(s.useState)([]),g=Object(N.a)(p,2),h=g[0],f=g[1],x=Object(s.useState)(""),v=Object(N.a)(x,2),w=v[0],S=v[1];Object(s.useEffect)((function(){r=Object(G.io)("localhost:3001/"),a(!0)}),[n]);Object(s.useEffect)((function(){r.on("receive_message",(function(e){f([].concat(Object(F.a)(h),[e]))}))}));var y=function(){var e=Object(q.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={room:b,content:{author:O,message:w}},f([].concat(Object(F.a)(h),[t.content])),S(""),e.next=5,r.emit("send_message",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Q.jsx)("div",{children:i?Object(Q.jsxs)("div",{className:"messenger-page-container",children:[Object(Q.jsx)("div",{className:"chat-container",children:h.map((function(e){return Object(Q.jsxs)("div",{className:"messageList-container",children:[Object(Q.jsx)("p",{children:e.author}),Object(Q.jsx)("div",{className:"message",children:Object(Q.jsx)("p",{children:e.message})})]})}))}),Object(Q.jsxs)("div",{className:"message-input-container",children:[Object(Q.jsx)("input",{type:"text",placeholder:"Message",value:w,onChange:function(e){return S(e.target.value)}}),Object(Q.jsx)("button",{onClick:y,children:"Send"})]})]}):Object(Q.jsxs)("div",{className:"room-selector",children:[Object(Q.jsx)("input",{type:"text",onChange:function(e){return d(e.target.value)},placeholder:"Enter Room Name"}),Object(Q.jsx)("button",{onClick:function(){u(!0),r.emit("join_room",b)},children:"Join Room"})]})})},z=Object(O.a)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.map((function(e){var t=e.message;return console.log("GraphQL error ".concat(t)),null})),n&&console.log(n)})),D=Object(u.from)([z,new l.a({uri:"http://localhost:3001/graphql"})]),K=new j.a({cache:new b.a,link:D}),T=function(){var e=m((function(e){return e.loggedin.loggedin})),t=g();return Object(Q.jsx)(d.a,{client:K,children:Object(Q.jsx)("div",{className:"App",children:e?Object(Q.jsx)(M,{}):Object(Q.jsx)(B,{loginHandle:function(){t(v())}})})})},V=Object(h.a)({reducer:{loggedin:w,account:P}});i.a.render(Object(Q.jsx)(p.a,{store:V,children:Object(Q.jsx)(T,{})}),document.getElementById("root"))}},[[148,1,2]]]);
//# sourceMappingURL=main.173a808d.chunk.js.map